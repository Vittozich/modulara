# Библиотека для разбиения логики на модули

## Команды для работы с модульностью:

- `php artisan modulara:base` - публикация базовой структуры с основными классами

## Структура модульности:

Вся модульность начинается в папке `Modular`

Если следовать структуре модульности при создании модулей - все миграции, вьюшки и роуты будут обнаружены автоматически.

В папке `Base` находятся основные элементы системы, от которых должно происходить наследование всех элементов в модульности, а подробнее:
- `Controllers` - здесь находятся все основные контроллеры и их виды, можно вписывать глобальные наследуемые контроллеры или сервисы.
- `Models` - основные модели системы, дополнять аннотациями функции модели (основные) лучше здесь и не использовать сторонние библиотеки.
- `Repositories` - шаблон для репозитория в модулях, можно создать свои репозитории.
- `Routes` - не публикуемый шаблон web и api роутов, так как нет смысла публиковать, когда происходит автоопределение структуры модульности.
- `Tests` - основные тесты, которые используют разный подход к тестированию данных в базе данных:
    - `DbTestCase` - тестирует данные в тестовой базе, автоматическая очистка базы после каждого теста
    - `ExistsDbTestCase` - тестирует существующую базу, без её обновление или очистки (для поиска)
    - `SimpleTestCase`- тестирует данные в тестовой базе, но без очистки данных - для проверки наполненности и цепочки тестов.
  
В папке `Mosules` находятся все модули, которые имеют от 1 и до бесконечности вложенность. (1 дефолт)

Каждый уровень вложенности следует называть по-разному, например основной уровень (конечный) всегда будет называться ...Module (SomeNameModule), второй уровень ...Section, третий уровень ...Service и т.д. Но лучше изначально иметь лишь 1 уровень. Ни одно название модуля не должно повторяться даже если они находятся на разных уровнях вложенности.

### Обязательная структура модуля (автооопределение):

- `Migrations` - папка, в которой будут содержаться миграции
- `Routes` - папка с роутами, должна содержать и/или `api.php`, `web.php`
- `Views` - папка с вьюшками, к которым затем можно будет обращаться по имени модуля.

### Желательная структура модуля (автосоздание (в разработке))

- `Controllers` - контроллеры модуля
- `Models` - модели модуля
- `Factories` - фабрики для создания объектов в основном для тестов  
- `Tests` - различные тесты модуля (в разработке, нужно задать или описать как тесты будут обращаться к этой папке) 

### Дополнительная структура (автосоздание (в разработке) и следование SOLID и частично DDD для разработки)  

- `Repositories` - репозитории моделей модуля
- `DTOs` - DTO объекты для использования в `Actions` или при предачи информации  
- `Actions` - классы с одним методом и вложенными `Tasks`

### Нежелательная структура (без автосоздания из-за связанности)

- `Services` - сервисы, от которых будут создаваться модели для работы с логикой приложения

## План разработки:

- [x] Основной элемент поиска модулей `Modular.php` - это ядро, используемое в провайдерах (src/)
- [x] Файл конфигурации модулей `modulara.php` (максимальная вложенность = 1) (config/)
- [x] Публикация `Modular/Base` в соответствующую папку с переименованием `namespace` (в базовой сборке Laravel)
- [x] Собственные провайдеры для работы с модульностью.
- [ ] Добавление DTO и Actions в структуру и публикацию  
- [ ] Добавление к базовой публикации рабочего примера одного модуля. 
- [ ] Базовые тесты по проверки работоспособности модульности.
- [ ] Описание или создание провайдера для работы с тестами в модульности. 
- [ ] решение проблемы связанности модулей (либо через статические экспортные методы переопределения классов, либо через структурные экспортные интерфейсы) + описание глобальных модулей и их структуры.
- [ ] Консольные команды по созданию элементов модульности внутри фреймворка.
- [ ] Полная документация по консольным командам и по работе со структурой модульности.
- [ ] Отключение полное или частичное автопоиска модулей и возможность указания их вручную. 
- [ ] Разработка оболочки для консольных команд (отдельный пакет или в этом, будет указанна ссылка)
- [ ] Разработка отдельного фреймворка модульности (отдельный проект, будет указанна ссылка) 

 



